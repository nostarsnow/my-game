function getLogos(){return[["Google","img/google.png"],["苹果","img/apple.png"],["三星","img/samsung.png"],["QQ","img/qq.png"],["微信","img/weixin.png"],["中国移动","img/cmcc.png"],["百度","img/baidu.png"],["新浪微博","img/weibo.png"],["微软","img/microsoft.png"],["联想","img/lianxiang.png"],["中国联通","img/liantong.png"],["中国工商银行","img/gonghang.png"],["LG","img/lg.png"],["红牛","img/hongniu.png"],["沃尔玛","img/woerma.png"],["麦当劳","img/maidanglao.png"],["肯德基","img/kendeji.png"],["中国石油","img/shiyou.png"],["DELL","img/dell.png"],["HP","img/hp.png"]]}function loaded(){function e(){$time.html(times),--times<0&&gameOver()}function n(){if($lavetime.show(),--laveTime<0)return $lavetime.hide(),startTime=(new Date).getTime(),init(),timesGo=setInterval(e,1e3),e(),void clearInterval(laveTimeGo);$lavetime.html('<img src="img/num'+laveTime+'.png"/>')}$xl_loading_p.html("100%"),$main.css("display","block"),$xl_loading.removeClass("xl_loding_show"),ns.loadHide(),logos=getLogos(),W=$main.width(),num=0,score=0,allTimes=60,times=60,laveTime=4,length=loader.length-4,chooseLock=!1,wrongTxt=["你不是在开玩笑吧？","你逗呢吧？","你太不细心了！"],function(){laveTimeGo=setInterval(n,1e3),n()}()}function init(){if(this.hide&&this.hide(),chooseLock=!1,$score.html(score),++num>length)return void gameOver(!0);var e=Math.floor(Math.random()*logos.length),n=logos[e],a=(n.height,W,n.width,""),i=[1,2,3,4];a+='<img src="'+n[1]+'" />';for(var o=0;o<4;o++){var t=i.splice(Math.floor(Math.random()*i.length),1),s="";1==t?s="0px 0px":2==t?s=.5*-W+"px 0px":3==t?s="0px "+.5*-W+"px":4==t&&(s=.5*-W+"px "+.5*-W+"px"),a+='<div class="s s'+(o+1)+'" data-name="'+n[0]+'" data-id="'+t+'" style="height:'+.5*W+"px;background-image:url("+n[1]+");background-size:"+W+"px "+W+"px;background-position:"+s+'"></div>'}$show.html(a),logos.splice(e,1)}function gameOver(e){if(ns.log.hide(),$show.unbind(click),clearInterval(timesGo),e){endTime=(new Date).getTime();var n=((endTime-startTime)/1e3).toFixed(2)}else var n=(allTimes-times-1).toFixed(2);ns.numberTo($scoreShow,score,3),ns.numberTo($timeShow,n,3),$myResultShow.show(),setTimeout(function(){$game.hide(),$myScore.show()},300)}function getList(){ns.load(),$.ajax({url:"conn/ajax.php?xl_r="+Math.random(),type:"POST",dataType:"json",data:{action:"queryList",currPage:currPage,pageSize:pageSize,tabName:"activeUser",showColumn:"*",strCondition:" activeId='"+active+"'",ascColumn:"convert(DECIMAL,score) DESC,CONVERT (DECIMAL, time) ASC,updateScoreTime asc",pkColumn:"id"},success:function(e){if(ns.loadHide(),console.log(e),0==e.errcode){1==currPage&&setTimeout(function(){$("#rank").attr("href","index.php").html('<img src="img/btn_reset.png"/>')},1e3),isAjax=!1;var n=e.list,a=n.length,i="";if(a>0){currPage++;for(var o=0;o<a;o++)allSize++,i+='<li><span class="num">'+allSize+'</span><span class="name">'+n[o].name+'</span><span class="score">'+(n[o].score||0)+'</span><span class="stime">'+(n[o].time||0)+"</span></li>";$rankList.append(i)}else end=1}}})}function upload(e){ns.load(),$.ajax({url:check.ajaxUrl+"?rand="+Math.random(),type:check.ajaxType,dataType:check.ajaxDataType,data:{action:"addDetail",active:active,openid:openid,score:score,time:e},success:function(e){console.log(e),ns.loadHide()},error:function(){$tip(check.ajaxError),ajaxLock=0}})}var loader=[],$main=$("#main"),$title=$("#title"),$show=$("#show"),$time=$("#time"),$score=$("#score"),$lavetime=$("#lavetime"),$xl_loading=$("#xl_loading"),$xl_loading_p=$("#xl_loading_p"),$game=$(".game"),$myScore=$("#myScore"),$myResultShow=$(".myResultShow"),$scoreShow=$("#scoreShow"),$timeShow=$("#timeShow"),$rank=$(".rank"),$rankList=$rank.find("ul"),loadImage=function(e,n){for(var a=0,i=e.length,o=0;o<i;o++)loader[o]=new Image,loader[o].src=e[o][1],loader[o].onload=function(){$xl_loading_p.html((a/i*100).toFixed(2)+"%"),++a>=i&&n()},loader[o].name=e[o][0]};window.onload=function(){var e=getLogos();e.push(["num0","img/num0.png"]),e.push(["num1","img/num1.png"]),e.push(["num2","img/num2.png"]),e.push(["num3","img/num3.png"]),loadImage(e,loaded)},$("#rank").on(click,function(){ns.tip("暂无排名！")}),$rankList.scroll(function(e){!end&&0==isAjax&&$rankList.height()-$rank.height()-$rankList.scrollTop()<20&&(isAjax=!0,getList())}),$show.on(click,".s",function(){if(!chooseLock){chooseLock=!0;var e=$(this),n=e.data("id"),a=e.data("name"),i=Math.floor(3*Math.random()),o="答对了，你太棒了！",t=wrongTxt[i]+a+"的标志都不知道！</span>";"中国石油"==a&&(o="答对了，爱岗爱司小能手！",t="小团不开心，你不爱我们。"),1==n?(score+=5,ns.log({title:'<span class="t_green">'+o+"</span>",btn_confirm:"继续挑战",confirm:init})):ns.log({title:'<span class="t_red">'+t+"</span>",btn_confirm:"继续挑战",confirm:init})}});var currPage=1,pageSize=10,allSize=0,end=0,isAjax=!0,bgm=document.getElementById("bgmp3"),bgmPlayed=!1;$(document).on("touchstart",function(){bgmPlayed?bgm.play():!1!==bgm.paused&&(bgm.load(),bgmPlayed=!0,bgm.play()),$(document).unbind("touchstart")});